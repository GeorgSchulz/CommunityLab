- name: check that SSH private key exists
  stat:
    path: "{{ ssh_private_key_path }}"
  register: private_key_path

- name: print message depending SSH private key check
  assert:
    that: "private_key_path.stat.exists"
    fail_msg: "Specified SSH private key is not present using defined absolute path, is the provided path correct?"
    success_msg: "Specified SSH private key is present."

- name: check that SSH public key exists
  stat:
    path: "{{ ssh_public_key_path }}"
  register: public_key_path

- name: print message depending SSH public key check
  assert:
    that: "public_key_path.stat.exists"
    fail_msg: "Specified SSH public key is not present using defined absolute path, is the provided path correct?"
    success_msg: "Specified SSH public key is present."

- name: get input for variable ansible_ssh_private_key
  shell: "sed \":a;N;$!ba;s/\\n/\\\n/g\" {{ ssh_private_key_path }}"
  register: ansible_ssh_private_key

- name: get input for variable ansible_ssh_public_key
  shell: "sed \":a;N;$!ba;s/\\n/\\\n/g\" {{ ssh_public_key_path }}"
  register: ansible_ssh_public_key

- name: show input of variable ansible_ssh_private_key
  debug:
    var: ansible_ssh_private_key.stdout

- name: show input of variable ansible_ssh_public_key
  debug:
    var: ansible_ssh_public_key.stdout

- set_fact:
    ansible_ssh_public_key: "{{ ansible_ssh_public_key.stdout }}"
